!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";e.exports=n(1)},function(e,t,n){"use strict";
/** @license React v16.12.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2),o="function"==typeof Symbol&&Symbol.for,a=o?Symbol.for("react.element"):60103,i=o?Symbol.for("react.portal"):60106,c=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,s=o?Symbol.for("react.provider"):60109,f=o?Symbol.for("react.context"):60110,p=o?Symbol.for("react.forward_ref"):60112,m=o?Symbol.for("react.suspense"):60113;o&&Symbol.for("react.suspense_list");var d=o?Symbol.for("react.memo"):60115,y=o?Symbol.for("react.lazy"):60116;o&&Symbol.for("react.fundamental"),o&&Symbol.for("react.responder"),o&&Symbol.for("react.scope");var h="function"==typeof Symbol&&Symbol.iterator;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function E(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||v}function w(){}function O(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||v}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(b(85));this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=E.prototype;var S=O.prototype=new w;S.constructor=O,r(S,E.prototype),S.isPureReactComponent=!0;var j={current:null},k={current:null},N=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,o={},i=null,c=null;if(null!=t)for(r in void 0!==t.ref&&(c=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,r)&&!P.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),s=0;s<l;s++)u[s]=arguments[s+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:a,type:e,key:i,ref:c,props:o,_owner:k.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var R=/\/+/g,x=[];function T(e,t,n,r){if(x.length){var o=x.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function I(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>x.length&&x.push(e)}function $(e,t,n){return null==e?0:function e(t,n,r,o){var c=typeof t;"undefined"!==c&&"boolean"!==c||(t=null);var l=!1;if(null===t)l=!0;else switch(c){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case a:case i:l=!0}}if(l)return r(o,t,""===n?"."+D(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var s=n+D(c=t[u],u);l+=e(c,s,r,o)}else if(null===t||"object"!=typeof t?s=null:s="function"==typeof(s=h&&t[h]||t["@@iterator"])?s:null,"function"==typeof s)for(t=s.call(t),u=0;!(c=t.next()).done;)l+=e(c=c.value,s=n+D(c,u++),r,o);else if("object"===c)throw r=""+t,Error(b(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return l}(e,"",t,n)}function D(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function A(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(R,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,o){var a="";null!=n&&(a=(""+n).replace(R,"$&/")+"/"),$(e,B,t=T(t,a,r,o)),I(t)}function F(){var e=j.current;if(null===e)throw Error(b(321));return e}var M={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;$(e,A,t=T(null,null,t,n)),I(t)},count:function(e){return $(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(b(143));return e}},createRef:function(){return{current:null}},Component:E,PureComponent:O,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:p,render:e}},lazy:function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return F().useCallback(e,t)},useContext:function(e,t){return F().useContext(e,t)},useEffect:function(e,t){return F().useEffect(e,t)},useImperativeHandle:function(e,t,n){return F().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return F().useLayoutEffect(e,t)},useMemo:function(e,t){return F().useMemo(e,t)},useReducer:function(e,t,n){return F().useReducer(e,t,n)},useRef:function(e){return F().useRef(e)},useState:function(e){return F().useState(e)},Fragment:c,Profiler:u,StrictMode:l,Suspense:m,createElement:_,cloneElement:function(e,t,n){if(null==e)throw Error(b(267,e));var o=r({},e.props),i=e.key,c=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(c=t.ref,l=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(s in t)N.call(t,s)&&!P.hasOwnProperty(s)&&(o[s]=void 0===t[s]&&void 0!==u?u[s]:t[s])}var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){u=Array(s);for(var f=0;f<s;f++)u[f]=arguments[f+2];o.children=u}return{$$typeof:a,type:e.type,key:i,ref:c,props:o,_owner:l}},createFactory:function(e){var t=_.bind(null,e);return t.type=e,t},isValidElement:C,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r}},z={default:M},Q=z&&M||z;e.exports=Q.default||Q},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,c,l=i(e),u=1;u<arguments.length;u++){for(var s in n=Object(arguments[u]))o.call(n,s)&&(l[s]=n[s]);if(r){c=r(n);for(var f=0;f<c.length;f++)a.call(n,c[f])&&(l[c[f]]=n[c[f]])}}return l}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(s,e);var t,n,r,a=u(s);function s(){return i(this,s),a.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=getTaskIconClass(this.props.task.completed,this.props.task.dueDate),t=this;return o.a.createElement("div",{className:"item"},o.a.createElement("i",{className:"large ".concat(e," middle aligned icon"),onClick:function(){t.props.task.patchAction({completed:!t.props.task.completed})}}),o.a.createElement("div",{className:"content",onClick:this.props.task.viewAction},o.a.createElement("div",{className:"header"},this.props.task.title),o.a.createElement("div",{className:"description"},o.a.createElement("pre",{style:{margin:"0"}},this.props.task.description))))}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(c,e);var t,n,a,i=b(c);function c(){return d(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){if(this.props.pages<=1)return o.a.createElement(r.Fragment,null);var e=o.a.createElement(r.Fragment,null),t=o.a.createElement(r.Fragment,null);return this.props.pages!==this.props.current&&(e=o.a.createElement("button",{class:"ui right floated circular small icon button",onClick:this.props.nextCallback},o.a.createElement("i",{class:"angle right fitted icon"}))),this.props.current>1&&(t=o.a.createElement("button",{className:"ui circular small icon button",onClick:this.props.prevCallback},o.a.createElement("i",{className:"angle left fitted icon"}))),o.a.createElement("div",{className:"ui centered grid"},o.a.createElement("div",{className:"three wide column"},t),o.a.createElement("div",{className:"four wide center aligned column"},"".concat(this.props.current," of ").concat(this.props.pages)),o.a.createElement("div",{className:"three wide column"},e))}}])&&y(t.prototype,n),a&&y(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.Component;function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(i,e);var t,n,r,a=x(i);function i(){return _(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;$("#".concat(this.props.id)).modal({allowMultiple:!1,detachable:!1,onHidden:function(){void 0!==e.props.onClosedCallback&&e.props.onClosedCallback()},onShow:function(){void 0!==e.props.onOpeningCallback&&e.props.onOpeningCallback()}})}},{key:"render",value:function(){var e;return void 0!==this.props.title&&(e=o.a.createElement("div",{className:"header"},this.props.title)),ReactDOM.createPortal(o.a.createElement("div",{className:"ui ".concat(this.props.modalType," modal"),style:{position:"fixed"},id:this.props.id},e,o.a.createElement("div",{className:"".concat(this.props.contentType," content")},this.props.children)),document.getElementById("modals"))}}])&&C(t.prototype,n),r&&C(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q(e);if(t){var o=Q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(i,e);var t,n,r,a=F(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={title:"",description:"",duedate:(new Date).toISOString().substring(0,16),tags:[],tag:"",category:"",formTitle:"",buttonText:""},t.handleSubmit=t.handleSubmit.bind(z(t)),t.handleUserInput=t.handleUserInput.bind(z(t)),t.handleInit=t.handleInit.bind(z(t)),t.handleTagsKeyDownEvent=t.handleTagsKeyDownEvent.bind(z(t)),t.handleRemoveTagEvent=t.handleRemoveTagEvent.bind(z(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){$("#createtaskform").form({fields:{title:{identifier:"title",rules:[{type:"empty",prompt:"You must provide a title for the task"},{type:"maxLength[70]",prompt:"Title cannot be larger than 70 characters"}]}},onSuccess:function(e,t){e.preventDefault()},keyboardShortcuts:!1})}},{key:"handleUserInput",value:function(e){var t=e.target.name,n=e.target.value;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this;$("#createtaskform").form("is valid")&&("create"===this.props.mode?$.ajax({type:"POST",url:"/api/v1/tasks",headers:{Authorization:"Bearer "+this.props.token,Accept:"application/json"},contentType:"application/json",data:JSON.stringify({title:t.state.title,dueDate:t.state.duedate,description:t.state.description,tags:t.state.tags}),error:function(e){},success:function(e){setTimeout((function(){t.props.getTasks(),$("#createtaskmodal").modal("hide")}),300)}}):"edit"===this.props.mode&&(this.props.patchTask({title:this.state.title,description:this.state.description,dueDate:this.state.duedate,tags:this.state.tags},this.props.task),setTimeout((function(){$("#createtaskmodal").modal("hide")}),300)))}},{key:"handleInit",value:function(){"create"===this.props.mode?($("#cretaskdisplayerrors").empty(),$("#createtaskform").form("clear"),this.setState({formTitle:"Create task",title:"",description:"",duedate:(new Date).toISOString().substring(0,16),tags:[],tag:"",buttonText:"Create"})):"edit"===this.props.mode&&this.setState({formTitle:"Edit task "+this.props.task.id,title:this.props.task.title,description:this.props.task.description,duedate:new Date(this.props.task.dueDate).toISOString().substring(0,16),tags:void 0===this.props.task.tags?[]:this.props.task.tags,tag:"",buttonText:"Edit"})}},{key:"handleTagsKeyDownEvent",value:function(e){if(13===e.keyCode)if(e.preventDefault(),this.state.tags.includes(this.state.tag))this.setState({tag:""});else{var t=this.state.tags;t.push(this.state.tag),this.setState({tags:t,tag:""})}}},{key:"handleRemoveTagEvent",value:function(e){var t=this.state.tags.filter((function(t){return t!==e}));this.setState({tags:t})}},{key:"render",value:function(){var e=this,t=this;return o.a.createElement(D,{id:"createtaskmodal",onOpeningCallback:this.handleInit},o.a.createElement("form",{className:"ui small form",id:"createtaskform",onSubmit:this.handleSubmit},o.a.createElement("h4",{className:"ui dividing header"},this.state.formTitle),o.a.createElement("div",{className:"field"},o.a.createElement("label",null,"Title"),o.a.createElement("input",{type:"text",name:"title",maxLength:70,value:this.state.title,onChange:function(t){return e.handleUserInput(t)}})),o.a.createElement("div",{className:"field"},o.a.createElement("label",null,"Description"),o.a.createElement("textarea",{rows:"2",name:"description",value:this.state.description,onChange:function(t){return e.handleUserInput(t)}})),o.a.createElement("div",{className:"two fields"},o.a.createElement("div",{className:"field"},o.a.createElement("label",null,"Tags"),o.a.createElement("input",{type:"text",name:"tag",id:"tagref",value:this.state.tag,onChange:function(t){return e.handleUserInput(t)},onKeyDown:function(t){return e.handleTagsKeyDownEvent(t)}})),o.a.createElement("div",{className:"field"},o.a.createElement("label",null,"Due date"),o.a.createElement("input",{type:"datetime-local",name:"duedate",value:this.state.duedate,onChange:function(t){return e.handleUserInput(t)}}))),o.a.createElement("div",{className:"two fields"},o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"ui labels"},this.state.tags.map((function(e,n){return o.a.createElement("div",{class:"ui teal label"},o.a.createElement("i",{class:"tag icon"}),e,o.a.createElement("i",{class:"delete icon",onClick:function(){t.handleRemoveTagEvent(e)}}))}))))),o.a.createElement("div",{className:"ui error message",id:"cretaskdisplayerrors"}),o.a.createElement("button",{className:"ui small blue fluid button",type:"submit"},this.state.buttonText)))}}])&&B(t.prototype,n),r&&B(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return(W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(c,e);var t,n,a,i=G(c);function c(){return q(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){if(void 0===this.props.task)return o.a.createElement(r.Fragment,null);var e=this,t=dateDiffFormat(new Date,new Date(this.props.task.creationDate))+" ago",n=formatDate(this.props.task.dueDate),a=o.a.createElement(r.Fragment,null);return null!=this.props.task.tags&&this.props.task.tags.length>0&&(a=o.a.createElement("div",{className:"ui labels"},this.props.task.tags.map((function(e,t){return o.a.createElement("div",{className:"ui teal label"},o.a.createElement("i",{className:"tag icon"}),e)})))),o.a.createElement(D,{id:"taskmodal",modalType:"basic"},o.a.createElement("div",{className:"ui fluid card"},o.a.createElement("div",{className:"content"},o.a.createElement("i",{class:"right floated trash alternate outline grey icon",onClick:function(){e.props.task.deleteAction()}}),o.a.createElement("i",{class:"right floated edit outline grey icon",onClick:function(){e.props.parentStateCallback({mode:"edit"},(function(){$("#createtaskmodal").modal("show")}))}}),o.a.createElement("div",{className:"header"},this.props.task.title),o.a.createElement("div",{className:"meta"},t,o.a.createElement("span",{className:"right floated"},"Due ",n)),o.a.createElement("div",{className:"description"},o.a.createElement("p",{style:{color:"black"}},o.a.createElement("pre",null,this.props.task.description)),a)),o.a.createElement("div",{class:"extra content"},o.a.createElement("div",{class:"right floated author"},o.a.createElement("img",{class:"ui avatar image",src:"https://avatars.dicebear.com/v2/jdenticon/".concat(this.props.task.id,".svg")})," ",this.props.task.id))))}}])&&H(t.prototype,n),a&&H(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var o=ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.Component;function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var o=me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(c,e);var t,n,a,i=fe(c);function c(){return le(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=o.a.createElement("div",{className:"ui icon message"},o.a.createElement("i",{className:"file code outline icon"}),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"header"},"Welcome!"),o.a.createElement("p",null,"This is a personal project to showcase some programming techniques and frameworks, it currently features a note app."),o.a.createElement("p",null,'The initial idea behind the project was to create a flashcard repository or "knowledge base" (thus the name "Wissen", which means knowledge in german), but since 2016 this has been my playground for software development. Having the last two years the higher peak of activity.'),o.a.createElement("p",null,"You can follow the development of this project, collaborate and raise bugs on github."),o.a.createElement("div",{className:"ui labels"},o.a.createElement("a",{className:"ui grey label",href:"https://github.com/seiferxx/wissen"},o.a.createElement("i",{className:"github icon"}),"wissen"),o.a.createElement("a",{className:"ui grey label",href:"https://github.com/Seiferxx/wissen/tree/development-heroku"},o.a.createElement("i",{className:"code branch icon"}),"dev branch"),o.a.createElement("a",{className:"ui grey label",href:"https://github.com/Seiferxx/wissen/issues"},o.a.createElement("i",{className:"bug icon"}),"bugs"),o.a.createElement("a",{className:"ui grey label",href:"https://github.com/Seiferxx/wissen/projects/2"},o.a.createElement("i",{className:"project diagram icon"}),"project")),o.a.createElement("p",null,"If you have any concern regarding the project please contact me"),o.a.createElement("div",{className:"ui labels"},o.a.createElement("div",{className:"ui grey label"},o.a.createElement("i",{className:"google icon"}),"seifer.ch@gmail.com"),o.a.createElement("a",{className:"ui grey label",href:"https://twitter.com/Seiferson"},o.a.createElement("i",{className:"twitter icon"}),"@Seiferson"))));return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"ui container"},o.a.createElement("div",{className:"ui segment"},o.a.createElement("h2",{className:"ui center aligned icon header"},o.a.createElement("i",{className:"circular laptop code icon"}),"Wissen")),o.a.createElement("div",{className:"ui stackable two column grid"},o.a.createElement("div",{className:"column"},e),o.a.createElement("div",{className:"column"}))))}}])&&ue(t.prototype,n),a&&ue(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return(ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return we(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se="/api/v1/notes",je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(c,e);var t,n,a,i=ge(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).state={notes:{},note:null,text:"",title:"",updateQueue:[]},t.handleQueueProcessing=t.handleQueueProcessing.bind(we(t)),t.handleUpdateNote=t.handleUpdateNote.bind(we(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.authCallback((function(){e.handleGetNotes(),$(".ui.search").search({minCharacters:3,apiSettings:{url:"/api/v1/notes/search?text={query}",onResponse:function(e){var t={results:[]};return $.each(e,(function(e,n){t.results.push({title:n.text.split("\n")[0].substring(0,25),description:n.id})})),t},beforeXHR:function(e){return e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("authtoken")),e.setRequestHeader("Accept","application/json"),e}},onSelect:function(t,n){return e.setState({note:t.description,text:e.state.notes[t.description].text}),$(".ui.search").search("hide results",(function(){})),$(".ui.search").search("set value",""),!1}})}),(function(){e.props.parentStateCallback({layout:"home"})}))}},{key:"handleQueueProcessing",value:function(){var e=this.state.updateQueue,t=this;e.map((function(e,n){t.handleUpdateNote(e)})),e=[],this.setState({updateQueue:e})}},{key:"handleUserInput",value:function(e){var t,n=e.target.name,r=e.target.value,o=this.state.note,a=this.state.updateQueue,i=this.state.notes;i[o][n]=r,a.includes(o)||a.push(o),this.setState((he(t={},n,r),he(t,"updateQueue",a),he(t,"notes",i),t))}},{key:"handleCreateNote",value:function(){var e=this;fetch(Se,{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("authtoken"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({owner:e.props.user,title:new Date+"",text:"",encrypted:!1})}).then((function(e){return e.json()})).then((function(t){var n=e.state.notes,r=t.data;r.color=getRandomColor(),n[r.id]=r,e.setState({notes:n,note:r.id,text:r.text,title:r.title})}))}},{key:"handleDeleteNote",value:function(e){var t=this;fetch(Se+"/"+e,{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("authtoken"),Accept:"application/json"}}).then((function(n){if(200!==n.status)throw Error(n.statusText);var r=t.state.notes;delete r[e];var o=Object.keys(r);if(o.length>0){var a=r[o[0]];t.setState({notes:r,note:a.id,text:a.text})}else t.setState({notes:r,note:null,text:""})})).catch((function(e){console.error("Error:",e)}))}},{key:"handleGetNotes",value:function(){var e=this;fetch(Se,{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("authtoken"),Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){var n={};t.length&&(t.map((function(e,t){n[e.id]=e})),e.setState({notes:n,note:t[0].id,text:t[0].text,title:t[0].title}))}))}},{key:"handleSelectNote",value:function(e){this.setState({note:e,text:this.state.notes[e].text,title:this.state.notes[e].title})}},{key:"handleUpdateNote",value:function(e){fetch(Se+"/"+e,{method:"PATCH",headers:{Authorization:"Bearer "+localStorage.getItem("authtoken"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({text:this.state.notes[e].text,title:this.state.notes[e].title,encrypted:this.state.notes[e].encrypted})}).then((function(e){if(200!==e.status)throw Error(e.statusText)})).catch((function(e){console.error("Error:",e)}))}},{key:"render",value:function(){var e=this,t=null,n=this,a=null;if(Object.keys(this.state.notes).length>0&&(a=o.a.createElement("div",{className:"ui middle aligned selection list"},Object.keys(this.state.notes).map((function(e,t){var r=n.state.notes[e],a="";return r.id==n.state.note&&(a="active"),o.a.createElement("div",{className:"".concat(a," item"),onClick:function(){n.handleSelectNote(r.id)}},o.a.createElement("i",{className:"sticky note outline ".concat(r.color," icon")}),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"header"},r.title),o.a.createElement("div",{className:"description"},o.a.createElement("span",{className:"ui ".concat(r.color," text right floated")},formatDate(r.lastUpdate)))))})))),null!=this.state.note){var i=null,c=null,l=null,u=null;this.state.updateQueue.length?(i="yellow",c="sync alternate",l="out of sync"):(i="green",c="check circle outline",l="sync");var s=null;this.state.notes[this.state.note].encrypted?(u="eye outline",s=o.a.createElement("div",{className:"ui fluid placeholder",style:{"margin-left":"15px"}},o.a.createElement("div",{className:"paragraph"},o.a.createElement("div",{className:"line"}),o.a.createElement("div",{className:"line"}),o.a.createElement("div",{className:"line"}),o.a.createElement("div",{className:"line"}),o.a.createElement("div",{className:"line"})))):(u="eye slash outline",s=o.a.createElement("textarea",{className:"transparent",name:"text",placeholder:"Note content",value:this.state.text,onInput:function(t){return e.handleUserInput(t)}})),t=o.a.createElement("form",{className:"ui form"},o.a.createElement("div",{className:"ui tiny basic right floated ".concat(i," label")},o.a.createElement("i",{className:"".concat(c," icon")})," ",l),o.a.createElement("div",{className:"ui icon buttons"},o.a.createElement("button",{className:"ui tertiary disabled icon button",type:"button"},o.a.createElement("i",{className:"icon"})),o.a.createElement("button",{className:"ui tertiary icon button",type:"button",onClick:function(){n.handleQueueProcessing()}},o.a.createElement("i",{className:"save outline blue icon"})),o.a.createElement("button",{className:"ui tertiary disabled icon button",type:"button"},o.a.createElement("i",{className:"icon"})),o.a.createElement("button",{className:"ui tertiary icon button",type:"button",onClick:function(){var e=n.state.notes,t=n.state.note,r=n.state.updateQueue,o=n.state.text,a=cryptico.generateRSAKey(md5(n.props.user),1024);o=e[t].encrypted?cryptico.decrypt(o,a).plaintext:cryptico.encrypt(o,cryptico.publicKeyString(a)).cipher,e[t].text=o,e[t].encrypted=!e[t].encrypted,r.includes(t)||r.push(t),n.setState({notes:e,text:o,updateQueue:r})}},o.a.createElement("i",{className:"".concat(u," blue icon")})),o.a.createElement("button",{className:"ui tertiary disabled icon button",type:"button"},o.a.createElement("i",{className:"icon"})),o.a.createElement("button",{className:"ui tertiary icon button",type:"button",onClick:function(){n.handleDeleteNote(n.state.note)}},o.a.createElement("i",{className:"trash alternate outline blue icon"}))),o.a.createElement("div",{className:"field"},o.a.createElement("br",null),o.a.createElement("div",{className:"ui transparent input"},o.a.createElement("input",{type:"text",placeholder:"Title",name:"title",value:this.state.title,onInput:function(t){return e.handleUserInput(t)}}))),o.a.createElement("div",{className:"field"},s))}else t=o.a.createElement("div",{className:"ui icon message"},o.a.createElement("i",{className:"sticky note outline icon"}),o.a.createElement("div",{className:"content"},o.a.createElement("p",null,"Currently you don't have any notes, please click on the add button on the left ",o.a.createElement("i",{className:"plus fitted icon"})," to start")));return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"ui container"},o.a.createElement("div",{className:"ui stackable mobile reversed grid"},o.a.createElement("div",{className:"five wide column"},o.a.createElement("div",{className:"ui grid"},o.a.createElement("div",{className:"thirteen wide column"},o.a.createElement("div",{className:"ui search"},o.a.createElement("div",{className:"ui fluid icon input"},o.a.createElement("input",{className:"prompt",type:"text",placeholder:"Search notes..."}),o.a.createElement("i",{className:"search icon"})),o.a.createElement("div",{className:"results"}))),o.a.createElement("div",{className:"three wide column"},o.a.createElement("button",{className:"ui basic circular icon button",onClick:function(){n.handleCreateNote()}},o.a.createElement("i",{className:"plus icon"})))),o.a.createElement("br",null),a),o.a.createElement("div",{className:"eleven wide column"},t))))}}])&&be(t.prototype,n),a&&be(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return(_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var o=xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Re(this,n)}}function Re(e,t){if(t&&("object"===ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(c,e);var t,n,a,i=Ce(c);function c(){return Ne(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"componentDidMount",value:function(){$("#topmenudropdown").dropdown()}},{key:"componentDidUpdate",value:function(){$("#topmenudropdown").dropdown()}},{key:"render",value:function(){var e=this,t=o.a.createElement(r.Fragment,null),n=o.a.createElement(r.Fragment,null);return"anonymous"===e.props.user?t=o.a.createElement("div",{className:"ui item",onClick:function(){$("#authmodal").modal("show")}},o.a.createElement("i",{className:"sign in alternate icon"}),"Sign in"):(t=o.a.createElement("div",{className:"ui borderless item"},o.a.createElement("img",{className:"ui bordered avatar image",src:"https://avatars.dicebear.com/v2/jdenticon/".concat(this.props.avatar,".svg")}),o.a.createElement("span",null,this.props.user)),n=o.a.createElement("div",{className:"ui dropdown icon item",id:"topmenudropdown"},o.a.createElement("i",{className:"bars icon"}),o.a.createElement("div",{className:"menu"},o.a.createElement("div",{className:"item",onClick:function(){localStorage.getItem("layout","home"),e.props.parentStateCallback({layout:"home"})}},o.a.createElement("i",{className:"home icon"}),"Home"),o.a.createElement("div",{className:"divider"}),o.a.createElement("div",{className:"item",onClick:function(){localStorage.setItem("layout","notes"),e.props.parentStateCallback({layout:"notes"})}},o.a.createElement("i",{className:"sticky note outline icon"}),"Notes"),o.a.createElement("div",{className:"divider"}),o.a.createElement("div",{className:"item",onClick:this.props.signOut},o.a.createElement("i",{className:"sign out alternate icon"}),"Sign out")))),o.a.createElement("div",{className:"ui top attached menu"},o.a.createElement("div",{className:"ui item",onClick:function(){localStorage.setItem("layout","home"),e.props.parentStateCallback({layout:"home"})}},o.a.createElement("h3",{className:"ui header"},"Wissen")),o.a.createElement("div",{className:"right menu"},t,n))}}])&&Pe(t.prototype,n),a&&Pe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return(Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fe(e);if(t){var o=Fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(i,e);var t,n,r,a=Be(i);function i(){return $e(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement("div",{className:"ui icon ".concat(this.props.type," message")},o.a.createElement("i",{className:"".concat(this.props.icon," icon")}),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"header"},this.props.header),o.a.createElement("p",null,this.props.message)))}}])&&De(t.prototype,n),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t){return(Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=We(e);if(t){var o=We(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){if(t&&("object"===ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return He(e)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ve(e,t)}(i,e);var t,n,r,a=Le(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={user:"",password:""},t.handleUserInput=t.handleUserInput.bind(He(t)),t.handleSubmit=t.handleSubmit.bind(He(t)),t.handleClearState=t.handleClearState.bind(He(t)),t}return t=i,(n=[{key:"handleClearState",value:function(){this.setState({user:"",password:""}),$("#authdisplayerrors").empty(),$("#authform").form("clear"),$("[name='loginerror']").val("value")}},{key:"handleUserInput",value:function(e){var t=e.target.name,n=e.target.value;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this;$("#authform").form("is valid")&&$.ajax({type:"POST",url:"/oauth/token",headers:{Authorization:"Basic bWFzdGVyOjEyMzQ1Ng==",Accept:"application/json"},contentType:"application/x-www-form-urlencoded",data:{password:t.state.password,username:t.state.user,grant_type:"password"},error:function(e){$('[name="loginerror"]').val(""),$("#authform").form("validate form"),$('[name="loginerror"]').val("value")},success:function(e){localStorage.setItem("authtoken",e.access_token),localStorage.setItem("user",t.state.user),$("#authmodal").modal("hide");var n=e;$.ajax({type:"GET",url:"/api/v1/accounts/"+t.state.user,headers:{Authorization:"Bearer "+e.access_token,Accept:"application/json"},success:function(e){$("body").toast({title:"Welcome back ",message:t.state.user,class:"",showIcon:"door open",position:"top left",className:{toast:"ui message"}}),t.props.parentStateCallback({user:t.state.user,token:n.access_token,avatar:e.avatarSeed})}})}})}},{key:"componentDidMount",value:function(){$("#authform").form({fields:{user:{identifier:"user",rules:[{type:"empty",prompt:"Username cannot be empty"}]},loginError:{identifier:"loginerror",rules:[{type:"empty",prompt:"User/Password do not match"}]}},onSuccess:function(e,t){e.preventDefault()},keyboardShortcuts:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement(D,{id:"authmodal",onOpeningCallback:this.handleClearState},o.a.createElement(Me,{icon:"id badge",header:"Hi! Stranger",message:"Welcome to wissen, please provide your credentials or register to use the system"}),o.a.createElement("form",{className:"ui form",onSubmit:this.handleSubmit,id:"authform"},o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"user"},"Username"),o.a.createElement("input",{type:"text",value:this.state.user,onChange:function(t){return e.handleUserInput(t)},name:"user"})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",value:this.state.password,onChange:function(t){return e.handleUserInput(t)},name:"password"})),o.a.createElement("div",{className:"field"},o.a.createElement("input",{type:"text",name:"loginerror",style:{display:"none"}})),o.a.createElement("div",{className:"ui error message",id:"authdisplayerrors"}),o.a.createElement("div",{className:"ui two buttons"},o.a.createElement("button",{className:"ui button",type:"submit"},"Login"),o.a.createElement("div",{className:"or"}),o.a.createElement("button",{className:"ui button",type:"button",onClick:function(){$("#regmodal").modal("show")}},"Register"))))}}])&&Qe(t.prototype,n),r&&Qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return(Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tt(e);if(t){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){if(t&&("object"===Ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return et(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(i,e);var t,n,r,a=Xe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={user:"",email:"",avatar:md5(Math.random().toString()),password:"",confirmpassword:""},t.handleUserInput=t.handleUserInput.bind(et(t)),t.handleSubmit=t.handleSubmit.bind(et(t)),t.handleSwitchAvatarImage=t.handleSwitchAvatarImage.bind(et(t)),t.handleClearState=t.handleClearState.bind(et(t)),t}return t=i,(n=[{key:"handleClearState",value:function(){$("#regdisplayerrors").empty(),$("#regform").form("clear"),this.setState({user:"",email:"",avatar:md5(Math.random().toString()),password:"",confirmpassword:""})}},{key:"componentDidMount",value:function(){$("#regform").form({fields:{user:{identifier:"user",rules:[{type:"empty",prompt:"Username cannot be empty"},{type:"maxLength[25]",prompt:"Username cannot be larger than 25 characters"}]},email:{identifier:"email",rules:[{type:"email",prompt:"Please provide a valid email address"}]},password:{identifier:"password",rules:[{type:"empty",prompt:"Password cannot be empty"},{type:"minLength[8]",prompt:"Password should be at least 8 characters long"}]},confirmPassword:{identifier:"confirmpassword",rules:[{type:"match[password]",prompt:"Passwords do not match"}]}},onSuccess:function(e,t){e.preventDefault()},keyboardShortcuts:!1})}},{key:"handleSwitchAvatarImage",value:function(){this.setState({avatar:md5(Math.random().toString())})}},{key:"handleUserInput",value:function(e){var t=e.target.name,n=e.target.value;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),$("#regform").form("is valid")&&$.ajax({type:"POST",url:"/api/v1/accounts",headers:{Accept:"application/json"},contentType:"application/json",data:JSON.stringify({password:this.state.password,nickname:this.state.user,email:this.state.email,avatarSeed:this.state.avatar}),error:function(e){},success:function(e){$("#regdisplayerrors").empty(),$("#regform").form("clear"),$("#regform").removeClass("error"),$("#regform").addClass("success"),setTimeout((function(){$("#regmodal").modal("hide")}),1500)}})}},{key:"render",value:function(){var e=this;return o.a.createElement(D,{id:"regmodal",onOpeningCallback:this.handleClearState},o.a.createElement("h4",{className:"ui dividing header"},"Register an account"),o.a.createElement("div",{className:"ui stackable grid"},o.a.createElement("div",{className:"four wide column"},o.a.createElement("img",{className:"ui bordered image",src:"https://avatars.dicebear.com/v2/jdenticon/".concat(this.state.avatar,".svg")}),o.a.createElement("br",null),o.a.createElement("button",{className:"fluid ui icon basic button",type:"button",onClick:this.handleSwitchAvatarImage},o.a.createElement("i",{className:"redo alternate icon"})," Switch avatar image")),o.a.createElement("div",{className:"twelve wide column"},o.a.createElement("form",{className:"ui small form",onSubmit:this.handleSubmit,id:"regform"},o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"user"},"Username"),o.a.createElement("input",{type:"text",maxLength:25,value:this.state.user,onChange:function(t){return e.handleUserInput(t)},name:"user"})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{type:"email",value:this.state.email,onChange:function(t){return e.handleUserInput(t)},name:"email"})),o.a.createElement("div",{className:"two fields"},o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",id:"password",value:this.state.password,onChange:function(t){return e.handleUserInput(t)},name:"password"})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"confirmpassword"},"Confirm password"),o.a.createElement("input",{type:"password",value:this.state.confirmpassword,onChange:function(t){return e.handleUserInput(t)},name:"confirmpassword"}))),o.a.createElement("div",{className:"ui success message"},o.a.createElement("div",{className:"header"},"Account created"),o.a.createElement("p",null,"Please log in using your user and password")),o.a.createElement("div",{className:"ui error message",id:"regdisplayerrors"}),o.a.createElement("button",{className:"ui blue fluid button",type:"submit"},"Register")))))}}])&&Je(t.prototype,n),r&&Je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return(at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var o=ut(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lt(e)}function lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}(c,e);var t,n,a,i=it(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=i.call(this,e),null==localStorage.getItem("layout")&&localStorage.setItem("layout","home"),null==localStorage.getItem("user")&&localStorage.setItem("user","anonymous"),null==localStorage.getItem("avatar")&&localStorage.setItem("avatar","anonymous"),t.state={layout:localStorage.getItem("layout"),user:localStorage.getItem("user"),avatar:localStorage.getItem("avatar")},t.handleStateChange=t.handleStateChange.bind(lt(t)),t.handleAuthValidation=t.handleAuthValidation.bind(lt(t)),t.handleRevokeToken=t.handleRevokeToken.bind(lt(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){this.handleAuthValidation((function(){}),(function(){}))}},{key:"handleStateChange",value:function(e,t){this.setState(e,t)}},{key:"handleAuthValidation",value:function(e,t){var n=this;null!=localStorage.getItem("authtoken")?fetch("/oauth/check_token?token="+localStorage.getItem("authtoken"),{method:"post",headers:{Authorization:"Basic bWFzdGVyOjEyMzQ1Ng==",Accept:"application/json"}}).then((function(r){200!==r.status?(localStorage.removeItem("authtoken"),n.setState({user:"anonymous",avatar:"anonymous"},t())):e()})):n.setState({user:"anonymous",avatar:"anonymous"},t())}},{key:"handleRevokeToken",value:function(){var e=this;fetch("/oauth/token?token="+localStorage.getItem("authtoken"),{method:"delete",headers:{Authorization:"Basic bWFzdGVyOjEyMzQ1Ng==",Accept:"application/json"}}).then((function(t){200===t.status&&(localStorage.removeItem("authtoken"),e.setState({user:"anonymous",avatar:"anonymous",layout:"home"},(function(){$("body").toast({title:"Bye bye",showIcon:"door closed",position:"top left",className:{toast:"ui message"}})})))}))}},{key:"render",value:function(){var e=o.a.createElement(r.Fragment,null);return"home"===this.state.layout?e=o.a.createElement(de,{parentStateCallback:this.handleStateChange,authCallback:this.handleAuthValidation,user:this.state.user,avatar:this.state.avatar}):"notes"===this.state.layout&&(e=o.a.createElement(je,{parentStateCallback:this.handleStateChange,authCallback:this.handleAuthValidation,user:this.state.user,avatar:this.state.avatar})),o.a.createElement(r.Fragment,null,o.a.createElement(Te,{user:this.state.user,avatar:this.state.avatar,parentStateCallback:this.handleStateChange,signOut:this.handleRevokeToken}),e,o.a.createElement(Ge,{parentStateCallback:this.handleStateChange}),o.a.createElement(nt,null))}}])&&ot(t.prototype,n),a&&ot(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);ReactDOM.render(o.a.createElement(st,null),document.getElementById("root"));t.default=st}]);